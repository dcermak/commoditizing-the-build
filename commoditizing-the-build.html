<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Commoditizing the Build</title>
<meta name="author" content="Dan ÄŒermÃ¡k"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./node_modules/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./node_modules/reveal.js/dist/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="./node_modules/@fortawesome/fontawesome-free/css/all.min.css"/>

<link rel="stylesheet" href="./custom-style.css"/>
<link rel="stylesheet" href="./node_modules/reveal.js/plugin/highlight/zenburn.css"/>
<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './node_modules/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h2 class="title">Commoditizing the Build</h2>
<p class="subtitle" style="color: Gray;">How Containers Save Our Contributor Base</p>
<p class="author">Dan ÄŒermÃ¡k</p>
<div style="float:left"><a href="https://fosdem.org/2026/" target="_blank"><img src="./media/FOSDEM_logo.svg" height="50px" style="margin-bottom:-12px"/> FOSDEM 2026</a></div>
<div style="float:right;font-size:35px;"><p xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#"><a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0 <i class="fab fa-creative-commons"></i> <i class="fab fa-creative-commons-by"></i></a></p></div>
</section>
<p>
 <script type="text/javascript">hljs.registerLanguage('rpm-specfile', window.hljsDefineRpmSpecfile); hljs.initHighlightingOnLoad(); </script>
</p>
<section>
<section id="slide-orgc395524">
<h2 id="orgc395524">who -u</h2>
<p>
Dan ÄŒermÃ¡k
</p>

<p>
 <div style="float:center">
 <table class="who-table">
 <tr><td><i class="fab fa-suse"></i></td><td> Fullstack Developer @SUSE</td></tr>
 <tr><td><i class="fab fa-fedora"></i></td><td> i3 SIG, Package maintainer</td></tr>
 <tr><td><i class="far fa-heart"></i></td><td> Developer Tools, Testing and Documentation, Home Automation</td></tr>
 <tr></tr>
 <tr></tr>
 <tr><td><i class="fa-solid fa-globe"></i></td><td> <a href="https://dancermak.name/">https://dancermak.name</a></td></tr>
 <tr><td><i class="fab fa-github"></i></td><td> <a href="https://github.com/dcermak/">dcermak</a></td></tr>
 <tr><td><i class="fab fa-mastodon"></i></td><td> <a href="https://mastodon.social/@Defolos">@Defolos@mastodon.social</a></td></tr>
 <tr><td><i class="fab fa-bluesky"></i></td><td> <a href="https://bsky.app/profile/defolos.bsky.social">@defolos.bsky.social</a></td></tr>
 </table>
 </div>
</p>
</section>
</section>
<section>
<section id="slide-orgc2fdd23">
<h2 id="orgc2fdd23">outline</h2>


</section>
</section>
<section>
<section id="slide-org23c2eb2">
<h2 id="org23c2eb2">Where are we?</h2>
<aside class="notes">
<ul>
<li>our contributor base is aging, look around (ML, chat, etc), it's the same people</li>

</ul>

</aside>

<p class="fragment (appear)">
<img src="./media/Tidelift 2024 charts wlogo Fig 12-1.png" height="500px"/>
</p>
</section>
<section id="slide-org72da53b">
<h3 id="org72da53b">But why?</h3>
<ul>
<li class="fragment appear">our tooling isn't cool anymore</li>
<li class="fragment appear">LLMs are not trained on our tooling</li>
<li class="fragment appear">building a distribution is hardâ„¢</li>

</ul>

<p class="fragment (appear)">
<img src="./media/linux-distro-build-pipeline.svg" height="500px"/>
</p>

</section>
<section id="slide-org72da53b-split">

<p class="fragment (appear)">
<img src="./media/from-source-to-image.svg" height="500px"/>
</p>
</section>
<section id="slide-org754d60b">
<h3 id="org754d60b"><span class="todo TODO">TODO</span> Omarchy</h3>
<aside class="notes">
<ul>
<li>very popular linux spin based on arch</li>
<li>super opinionated Hyprland setup</li>
<li>mostly shell scripts</li>

</ul>
<p>
&rarr; too simple for a general purpose distribution
</p>

</aside>

<p class="fragment (appear)">
<img src="./media/omarchy.png"/>
</p>

<p class="fragment (appear)">
<img src="./media/omarchy-github-languages.png"/>
</p>

<p>
Community on Github &amp; Discord
</p>
</section>
</section>
<section>
<section id="slide-org64475d1">
<h2 id="org64475d1">Universal Blue</h2>
<p>
<img src="./media/ublue.svg"/>
</p>

<blockquote  class="fragment (appear)">
<p>
This is a tool that allows cloud infrastructure people to use their skills to help the Linux desktop
</p>
</blockquote>
<p>
uBlue - Who We Are
</p>
</section>
<section id="slide-orgff6ced4">
<h3 id="orgff6ced4">Stack</h3>
<ul>
<li class="fragment appear"><a href="https://bootc-dev.github.io/bootc/">bootc</a> + <code>Dockerfile</code></li>
<li class="fragment appear"><i class="fa-brands fa-github"></i> Github</li>
<li class="fragment appear"><i class="fa-brands fa-github"></i> Github Actions</li>

</ul>

<p class="fragment (appear)">
Community on:
</p>
<ul>
<li class="fragment appear"><i class="fa-brands fa-discord"></i> Discord</li>
<li class="fragment appear"><i class="fa-brands fa-discourse"></i> Discourse</li>

</ul>
</section>
<section id="slide-orgc60fbd5">
<h3 id="orgc60fbd5"><span class="todo TODO">TODO</span> Contributors</h3>
<p class="fragment (appear)">
<img src="./media/ublue-contributors-2024.png"/>
</p>
</section>
</section>
<section>
<section id="slide-orgad263e8">
<h2 id="orgad263e8">Meet Devs where they are</h2>
<ul>
<li class="fragment appear">Developers know Dockerfiles</li>

</ul>
</section>
<section id="slide-org95d53f8">
<h3 id="org95d53f8">What's a package?</h3>
<p class="fragment (appear)">
<img src="./media/rpm-package.svg"/>
</p>
</section>
<section id="slide-org6d471b1">
<h3 id="org6d471b1">The Build Recipe</h3>
<div class="org-src-container">

<pre  class="fragment (appear)"  ><code class="spec" data-line-numbers='|1-4|5-9|11-13|15-19|21-23|25-28|30-31|33-37|39-51|53-54|'>Summary:	Extensible editor for structured binary data
Name:		poke
Version:	4.3
Release:	%autorelease

License:	GPL-3.0-or-later AND GFDL-1.3-no-invariants-or-later
URL:		https://www.jemarch.net/poke
Source0:	https://ftp.gnu.org/gnu/%{name}/%{name}-%{version}.tar.gz
Source1:	https://ftp.gnu.org/gnu/%{name}/%{name}-%{version}.tar.gz.sig

BuildRequires:	emacs
BuildRequires:	gcc
BuildRequires:	gc-devel

%description
GNU poke is an interactive, extensible editor for binary data. Not
limited to editing basic entities such as bits and bytes, it provides
a full-fledged procedural, interactive programming language designed
to describe data structures and to operate on them.

%prep
%{gpgverify} --keyring='%{SOURCE2}' --signature='%{SOURCE1}' --data='%{SOURCE0}'
%autosetup

%build
%define _lto_cflags %{nil}
%configure
%make_build

%check
make check

%install
%{make_install}
rm -f %{buildroot}/%{_infodir}/dir
rm -f %{buildroot}%{_libdir}/libpoke.a
rm -f %{buildroot}%{_libdir}/libpoke.la

%files
%{_bindir}/%{name}
%{_bindir}/poked
%{_bindir}/pokefmt
%{_bindir}/pk-bin2poke
%{_bindir}/pk-jojopatch
%{_bindir}/pk-strings
%{_infodir}/poke.info*.*
%{_mandir}/man1/%{name}.1*
%{_mandir}/man1/poked.1*
%{_mandir}/man1/pokefmt.1*
%doc AUTHORS ChangeLog NEWS README TODO
%license COPYING

%changelog
%autochangelog
</code></pre>
</div>
</section>
<section id="slide-org2c52e66">
<h3 id="org2c52e66">Is it that much different to this?</h3>
<div class="org-src-container">

<pre  class="fragment (appear)"  ><code class="Dockerfile" data-line-numbers='1-2|5-7|9|11-17|19|21|23-27|29'>ARG VERSION=4.3
ARG DIST
FROM fedora-rpm-buildroot:${DIST} as buildrequires

WORKDIR /src/
COPY poke-${VERSION}.tar.gz .
COPY poke-${VERSION}.tar.gz.sig .

RUN dnf -y install emacs gcc gc-devel nbdkit make

FROM localhost/poke-buildrequires as builder

RUN rpmdev-extract poke-${VERSION}.tar.gz
WORKDIR /src/poke-${VERSION}
RUN ./configure; \
    make build; \
    make check

RUN make install PREFIX=/usr/local

FROM fedora-rpm-buildroot:${DIST} as poke

LABEL org.opencontainers.image.version=${VERSION}
LABEL org.opencontainers.image.url="https://www.jemarch.net/poke"
LABEL org.opencontainers.image.title="Extensible editor for structured binary data"
LABEL org.opencontainers.image.description="GNU poke is an interactive, extensible editor for binary data."
LABEL org.opencontainers.image.licenses="GPL-3.0-or-later AND GFDL-1.3-no-invariants-or-later"

COPY --from=builder /usr/local/bin /usr/bin
</code></pre>
</div>
</section>
<section id="slide-orge69ab22">
<h3 id="orge69ab22">Introducing: <code>roci</code></h3>
<aside class="notes">
<p>
most pressing problems:
</p>
<ul>
<li>network isolation, actually kinda easy to solve, via multistage builds</li>
<li>AutoReqProv: rpm's dependency/provides generators. Absolutely required if you don't want packaging to suck. Solved by running <code>rpmdeps</code></li>
<li></li>

</ul>

</aside>

<p>
<i class="fa-brands fa-github"></i> <a href="https://github.com/dcermak/roci">dcermak/roci</a>
</p>

<p class="fragment (appear)">
<img src="./media/roci-build.svg"/>
</p>
</section>
<section id="slide-org1b52cb7">
<h3 id="org1b52cb7">Issues to tackle</h3>
<aside class="notes">
<ul>
<li>reproducible builds: kinda important, should be mostly doable by setting <code>SOURCE_DATE_EPOCH</code> ðŸ¤ž</li>
<li>macros: huge issue, rpm has</li>

</ul>

</aside>

<ul>
<li class="fragment appear">reproducible builds</li>
<li class="fragment appear">debuginfo</li>
<li class="fragment appear">macros</li>

</ul>
</section>
<section id="slide-org8195d9a">
<h4 id="org8195d9a">Let's talk about macros</h4>
</section>
<section id="slide-org55825d8">
<h3 id="org55825d8">What do we gain</h3>
<ul>
<li class="fragment appear">simplicity</li>
<li class="fragment appear">builds easier to debug &amp; inspect</li>

</ul>
</section>
<section id="slide-org0d98c88">
<h3 id="org0d98c88">What's an OCI Image</h3>
</section>
</section>
<section>
<section id="slide-org2dcc6f1">
<h2 id="org2dcc6f1">Repositories</h2>
</section>
</section>
<section>
<section id="slide-orgd3f544b">
<h2 id="orgd3f544b">Questions?</h2>
<p class="fragment (appear)">
Answers!
</p>
</section>
</section>
</div>
</div>
<script src="./node_modules/reveal.js/dist/reveal.js"></script>
<script src="./node_modules/reveal.js/plugin/highlight/highlight.js"></script>
<script src="./node_modules/reveal.js/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealHighlight, RevealNotes, history],
transition: 'none', hash: true
});

</script>
<script src="./node_modules/highlightjs-rpm-specfile/rpm-specfile.js"></script>
</body>
</html>
